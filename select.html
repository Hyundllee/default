<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>대·중분류 필터링 (Vanilla JS)</title>
  <style>
    body { font-family: sans-serif; line-height: 1.6; }
    select { padding: 6px; margin: 10px 0; }
    .content-box { display: none; margin-top: 30px; border: 1px solid #ccc; padding: 15px; }
    .content-box.active { display: block; }
    .content-sub-box > div { margin: 10px 0; padding: 10px; border: 1px dashed #999; transition: background 0.3s; }
  </style>
</head>
<body>

  <div class="select1">
    <p>대분류</p>
    <select id="select1" title="보고서 유형">
      <option value="전체">전체</option>
      <option value="1.공공데이터">1.공공데이터</option>
      <option value="2.데이터 타입식별">2.데이터 타입식별</option>
      <option value="3.예제코드">3.예제코드</option>
    </select>
  </div>

  <div class="select2">
    <p>중분류</p>
    <select id="select2" title="보고서 유형 표준">
      <option value="">중분류를 선택해주세요.</option>
      <option value="1.1 공공데이터 표준">1.1 공공데이터 표준</option>
      <option value="1.2 공공데이터 표준2">1.2 공공데이터 표준2</option>
      <option value="1.3 공공데이터 표준3">1.3 공공데이터 표준3</option>

      <option value="2.1 데이터 타입식별 표준1">2.1 데이터 타입식별 표준1</option>
      <option value="2.2 데이터 타입식별 표준2">2.2 데이터 타입식별 표준2</option>
      <option value="2.3 데이터 타입식별 표준3">2.3 데이터 타입식별 표준3</option>

      <option value="3.1 예제코드 표준1">3.1 예제코드 표준1</option>
      <option value="3.2 예제코드 표준2">3.2 예제코드 표준2</option>
      <option value="3.3 예제코드 표준3">3.3 예제코드 표준3</option>
    </select>
  </div>

  <div class="content-box">
    <div><h1>1.공공데이터</h1></div>
    <div class="content-sub-box">
      <div data-sub="1.1"><h2>1.1 공공데이터 표준1</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="1.2"><h2>1.2 공공데이터 표준2</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="1.3"><h2>1.3 공공데이터 표준3</h2><p>컨텐츠 입니다.</p></div>
    </div>
  </div>

  <div class="content-box">
    <div><h1>2.데이터 타입식별</h1></div>
    <div class="content-sub-box">
      <div data-sub="2.1"><h2>2.1 데이터 타입식별 표준1</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="2.2"><h2>2.2 데이터 타입식별 표준2</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="2.3"><h2>2.3 데이터 타입식별 표준3</h2><p>컨텐츠 입니다.</p></div>
    </div>
  </div>

  <div class="content-box">
    <div><h1>3.예제코드</h1></div>
    <div class="content-sub-box">
      <div data-sub="3.1"><h2>3.1 예제코드 표준1</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="3.2"><h2>3.2 예제코드 표준2</h2><p>컨텐츠 입니다.</p></div>
      <div data-sub="3.3"><h2>3.3 예제코드 표준3</h2><p>컨텐츠 입니다.</p></div>
    </div>
  </div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const select1 = document.getElementById('select1');
    const select2 = document.getElementById('select2');
    const allOptions = Array.from(select2.querySelectorAll('option')).map(opt => opt.cloneNode(true));
    const contentBoxes = document.querySelectorAll('.content-box');

    // ✅ 대분류 변경 시
    select1.addEventListener('change', () => {
      const selected = select1.value;

      // select2 초기화
      select2.innerHTML = '<option value="">중분류를 선택해주세요.</option>';

      if (selected === '전체') {
        // 전체 보기
        allOptions.forEach(opt => {
          if (opt.value !== '') select2.appendChild(opt.cloneNode(true));
        });
        contentBoxes.forEach(box => box.classList.add('active'));
      } else {
        const prefix = selected.split('.')[0] + '.';
        allOptions.forEach(opt => {
          if (opt.value.startsWith(prefix)) select2.appendChild(opt.cloneNode(true));
        });

        contentBoxes.forEach(box => {
          const h1Text = box.querySelector('h1').textContent.trim();
          box.classList.toggle('active', h1Text === selected);
        });
      }

      select2.value = '';
    });

    // ✅ 중분류 선택 시 스크롤 이동
    select2.addEventListener('change', () => {
      const selectedValue = select2.value;
      if (!selectedValue) return;
      const subNum = selectedValue.split(' ')[0];
      const target = document.querySelector(`[data-sub="${subNum}"]`);
      if (target) {
        window.scrollTo({
          top: target.getBoundingClientRect().top + window.scrollY - 20,
          behavior: 'smooth'
        });
        target.style.background = '#ffffcc';
        setTimeout(() => target.style.background = '', 1200);
      }
    });

    // ✅ 초기 설정 (전체 보기)
    select1.value = '전체';
    select1.dispatchEvent(new Event('change'));
    select2.value = '';
  });
  </script>

</body>
</html>
